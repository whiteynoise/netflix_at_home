# Тема: **Профили пользователей**

---

## Описание ФТ

- Сделать **CRUD** работы с профилем пользователя.
- Подключить **просмотр профилей клиентов в админке** (только для пользователей с соответствующими правами).
- Добавить возможность **добавлять понравившиеся фильмы** в профиль.
- Реализовать **выставление рейтинга** фильму, как в Кинопоиске/IMDB.
- Сделать возможность **оставлять рецензии** на фильм.
- Добавить к каждому фильму возможность **смотреть отзывы пользователей и рейтинг**.

---

## Предлагаемое архитектурное решение

![arch drawio (1)](https://github.com/user-attachments/assets/5f849209-0ec6-468e-9fe2-db592325e583)

---

## Описание сервисов, упомянутых в схеме

1. **nx_ugc_gateway**  
   Единая точка входа запросов CUD операций, связанных с сущностями UGC (рейтинги, закладки, рецензии, фильмы к закладкам), валидирует запросы и добавляет сообщения в Kafka.

2. **nx_ugc_worker**  
   Обработчик сообщений с Kafka, совершает необходимые CUD операции на MongoDB.

3. **nx_ugc_api**  
   Реализует выдачу контента с UGC-базы.

4. **nx_user_profiles**  
   Реализует формирование и выдачу витрины с любимыми фильмами, позволяет управлять пользовательской публичной информацией.

5. **nx_content**  
   Реализует выдачу информации о фильме, в контексте диплома выступает сервисом для обогащения данных.

6. **nx_auth**  
   Отвечает за чувствительные пользовательские данные, имеет в себе админские API для изменения пользовательской информации.

---

## Фактические новвоведения

1. Разбиение базы nx_auth на две: одна для чувствительных пользовательских данных, вторая для публичных пользовательских данных, используемая nx_user_profiles.
   
3. Создан новый сервис nx_user_profiles, отвечающий за контроль публичных данных пользователей, а также витрины любимых фильмов.
   
5. Полный рефакторинг nx_ugc (работа с рецензиями, закладками, лайками для рецензий и оценками фильмов):
  - Общение с сервисом через брокер при CUD операциях: создан nx_ugc_gateway и nx_ugc_worker;
  - Для операций получения данных выделен сервис nx_ugc_api.
